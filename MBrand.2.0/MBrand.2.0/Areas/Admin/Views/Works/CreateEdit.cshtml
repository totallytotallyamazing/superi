@model MBrand.Models.Work
@{
    ViewBag.Title = "Работа, а не хрен собачий";
    string actionName = (string)ViewContext.RouteData.Values["action"];
}
@section Scripts
{
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="/Controls/ckeditor/ckeditor.js" type="text/javascript"></script>
    <script src="/Controls/ckeditor/adapters/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $("#Text").ckeditor(function () { }, { toolbar: "Media" });
            $("#Description").ckeditor(function () { }, { toolbar: "Basic" });
            $("#SideBarText").ckeditor(function () { }, { toolbar: "Tiny", uiColor: "#fff" });
        })
    </script>
    @if (actionName == "Edit")
    {
        <script type="text/javascript">
            $(function () {
                $("#Name").attr("data-val", false);
                $('form').removeData('unobtrusiveValidation');
                $('form').removeData('validator');
                $.validator.unobtrusive.parse('form');
            });
        </script>
    }
}
@using (Html.BeginForm(actionName, "Works", new { area = "Admin" }, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.Hidden("redirectTo", (string)ViewBag.RedirecTo)
    if (Model != null)
    {
        @Html.Hidden("_id", Model.Id)
    }
    else
    {
        @Html.Hidden("workGroupId")
    }
    @Html.ValidationSummary(true)
    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Title)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Title)
        @Html.ValidationMessageFor(model => model.Title)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Description)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.Description)
        @Html.ValidationMessageFor(model => model.Description)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.SideBarText)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.SideBarText)
        @Html.ValidationMessageFor(model => model.SideBarText)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Text)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.Text)
        @Html.ValidationMessageFor(model => model.Text)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Image)
    </div>
    <div class="editor-field">
        <input type="file" name="workImage" id="workImage" />
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.BottomImage)
    </div>
    <div class="editor-field">
        <input type="file" name="workBottomImage" id="workBottomImage" />
    </div>

    <p>
        <input type="submit" value="Сохранить" />
    </p>
}
<div>
    <a href="@ViewBag.RedirecTo">Нозад</a>
</div>
